# PianoYT dataset defaults: paths, sampling, and target generation.
dataset:
  name: PianoYT
  root_dir: data/PianoYT
  annotations_root: data/PianoYT
  label_format: txt
  label_targets: [pitch, onset, offset, hand, clef]
  max_clips: 50
  manifest:
    train: null
    val: null
    test: null
  split: train
  split_train: train
  split_val: val
  split_test: test
  frames: 96
  decode_fps: 30.0
  hop_seconds: 0.03333333333333333
  skip_seconds: 15.0
  resize: [145, 1024]
  tiles: 3
  channels: 3
  grayscale: true
  normalize: true
  apply_crop: true
  canonical_hw: [145, 1024]
  registration:
    enable: true
    source: metadata
    interp: bilinear
    global_aug:
      enabled: false
      color_jitter:
        brightness: 0.1
        contrast: 0.1
  avlag:
    enable: true
  crop_rescale: auto
  include_low_res: false
  batch_size: 2
  num_workers: 2
  prefetch_factor: 1
  shuffle: true
  sampler:
    mode: onset_balanced
    onset_frac: 0.5
    nearmiss_frac: 0.25
    bg_frac: 0.25
    nearmiss_radius: 6
  require_labels: true
  frame_targets:
    enable: true
    tolerance: 0.03
    dilate_active_frames: 1
    fill_mode: overlap
    hand_from_pitch: true
    clef_thresholds: [60, 64]
    note_min: 21
    note_max: 108
    cache_labels: true
    cache_dir: .cache/labels
    targets_sparse: true
  testing:
    canary_json: tivit/tests/resources/pianoyt_canaries.json
    default_canary_count: 2
    regen_canaries: false
    enable_cache_equiv: false
    enable_audit_export: true
    audit_dir: tivit/tests/resources/audit/pianoyt
    cache_off: true
    strict_sampling: false
    strict_labels: false
    strict_fallback: false
    log_level: detailed
    export_report_json: true
    report_json_path: tivit/tests/resources/audit/pianoyt/model_readiness_report.jsonl
    max_event_examples: 2
    warn_fps_tolerance: 0.5
    warn_out_of_window_ratio: 0.2
    enable_debug_extras: false
